var iris=new function(){function s(){q&&C.debug&&window.console.debug(t,arguments)}function n(){q&&C.error&&window.console.error(t,arguments)}function M(){if(!N)return iris.E("You must set the welcome screen using iris.screen.WelcomeScreen()"),!1;if(G)return G=!1;var a=u.split("/"),b=document.location.hash.split("/"),c="",d="",g,v=!1;if(""!=u)for(var h=0,w=a.length;h<w;h++)if(""!=a[h]&&(c+=a[h]+"/",g=H(c),j.hasOwnProperty(g)&&!1===j[g].CanSleep()))return G=!0,document.location.hash=u,!1;c="";if(a.length>
b.length){h=0;for(w=a.length;h<w;h++)if(c+=a[h]+"/",b[h]&&(d+=b[h]+"/"),v||d!=c)v=!0,g=H(c),j[g].__Sleep__(),j[g].Hide()}d=c="";v=!1;h=0;for(w=b.length;h<w;h++)if(d+=b[h]+"/",a[h]&&(c+=a[h]+"/"),v||d!=c){var v=!0,e=g=H(d),f=b[h];g={};for(var i=/([\.\w_-]*)=([^&]*)/g;matches=i.exec(f);)g[matches[1]]=decodeURIComponent(matches[2]);if(I.hasOwnProperty(e)){if(!j.hasOwnProperty(e)){f=e;i=O[f];x(i);var l=new D;l.prototype=new k[i](l);l.__Id__=f;l.__UIComponents__=[];l.__$Container__=I[f];l.__FileJs__=i;
l.Create();l.Hide();j[f]=l}e=j[e];f=e.$Get().parent().data("screen_context");y.hasOwnProperty(f)&&(i=y[f],i.__Sleep__(),i.Hide());e.__Awake__(g?g:{});e.Show();y[f]=e}else n("Screen '"+e+"' must be registered with self.AddScreen() before go to")}u=d.replace(/\/$/,"")}function H(a){return a.replace(/\?[^\/]*/,"").replace(/\/$/,"")}function P(a){void 0!==a?J=a:(a=document.getElementsByTagName("base"),a=0<a.length?a[0].attributes.href.value:"/",J=document.location.protocol+"//"+document.location.host+
a);return J}function Q(a,b,c,d){$.ajax({url:a,dataType:b,async:!1,cache:K,success:c,error:d})}function x(a){if(!k.hasOwnProperty(a)){k[a]=!0;var b=0===a.indexOf("http")?a:P()+a;s("[iris.ui.Include]",b);if(-1<a.lastIndexOf(".css")){var c=document.createElement("link");c.rel="stylesheet";c.type="text/css";c.href=b;R.appendChild(c)}else{var d=-1<a.lastIndexOf(".html");Q(b,d?"html":"text",function(b){E=a;if(d){var c=k,h=b.match(/@@[A-Za-z_\.]+@@/g);if(h){var e,f=h.length;for(e=0;e<f;e++)b=b.replace(h[e],
S(h[e].substring(2,h[e].length-2)))}c[a]=b}else c=document.createElement("script"),c.language="javascript",c.type="text/javascript",c.text=b,R.appendChild(c)},function(a){delete k[b];n(a.status,"Error loading file '"+b+"'")})}}}function F(a){if(void 0!==a)i=a;else{if(!i){i=f["environment-default"];for(var b in f.environment)if(-1<document.location.href.indexOf(b)){i=f.environment[b];break}i||(i="pro");t="["+i+"]"}return i}}function T(a){$.extend(z,a);return z}function U(a){$.extend(A,a);return A}
function V(a,b){var c=m[a];if(c)for(var d=0,g=c.length;d<g;d++)if(c[d]===b)return d;return-1}function W(a,b){var c;if(-1<b.indexOf(".")){c=b.split(".");var d,g=c.length;for(d=0;d<g;d++)if(void 0!==a)a=a[c[d]];else break;c=a}else c=a[b];return c}function X(a,b){s("[iris.lang.Load]",a,b);null===e&&(e=a);p.hasOwnProperty(a)||(p[a]={});$.extend(p[a],b)}function S(a){var b;p.hasOwnProperty(e)?(b=W(p[e],a),void 0===b&&iris.W("Label '"+a+"' not found in Locale '"+e+"'",p[e]),"object"===typeof b&&iris.W("Label '"+
a+"' is an object but must be a property in Locale '"+e+"'",p[e])):iris.W("Locale '"+e+"' not loaded");return b?b:"??"+a+"??"}function Y(a){for(var b={},a=a.get(0).attributes,c,d=0,g=a.length;d<g;d++)c=a[d].name,0==c.indexOf("data-")&&(c=c.substr(5)),b[c]=a[d].value;return b}function Z(a){for(var b=aa("currency"),c=Number(a),a=0<=c?b.formatPos:b.formatNeg,d=c%1,c=String(Math.abs(c-d)),d=String(Math.abs(d).toFixed(b.precision)),d=d.substr(2),g=0;g<Math.floor((c.length-(1+g))/3);g++)c=c.substring(0,
c.length-(4*g+3))+b.thousand+c.substring(c.length-(4*g+3));return a.replace("n",c+b.decimal+d)}function ba(a,b){b||(b=aa("dateFormat"));"object"!==typeof a&&(a=new Date(Number(a)));for(var c="",d=0,g=b.length;d<g;d++)c+=ga(b[d],a);return c}function aa(a){if(B.hasOwnProperty(e)){if(B[e].hasOwnProperty(a))return B[e][a];iris.E("Regional setting '"+a+"' not found for locale '"+e+"'")}else iris.E("Regional for locale '"+e+"' not found")}function r(a){return 10>a?"0"+a:a}function ga(a,b){var c=B[e];switch(a){case "y":return String(b.getFullYear()).substring(2);
case "Y":return b.getFullYear();case "m":return c=b.getMonth()+1,r(c);case "n":return b.getMonth()+1;case "M":return c[monthNames][b.getMonth()].substring(0,3);case "b":return c[monthNames][b.getMonth()].substring(0,3).toLowerCase();case "F":return c[monthNames][b.getMonth()];case "d":return c=b.getDate(),r(c);case "D":return c[dayNames][b.getDay()].substring(0,3);case "l":return c[dayNames][b.getDay()];case "s":return c=b.getSeconds(),r(c);case "i":return c=b.getMinutes(),r(c);case "H":return c=
b.getHours(),r(c);case "h":return c=b.getHours(),r(0==c%12?12:c%12);case "a":return 12<b.getHours()?"p.m.":"a.m.";case "A":return 12<b.getHours()?"PM":"AM";case "U":return Math.floor(0.001*b.getTime());default:return a}}function ca(){this.__Setting__=null;this.Settings=function(a){return $.extend(this.__Setting__,a)};this.Setting=function(a,b){if(void 0===b)return this.__Setting__.hasOwnProperty(a)||iris.W("The setting ",a," is not in ",this.__Setting__,this),this.__Setting__[a];this.__Setting__[a]=
b}}function L(){this.TEMPLATE_APPEND="append";this.TEMPLATE_REPLACE="replace";this.TEMPLATE_PREPEND="prepend";this.__FileTmpl__=this.__FileJs__=this.__IsSleeping__=this.__$Container__=this.__UIComponents__=this.__Id__=this.__$Tmpl__=null;this.__Sleep__=function(){for(var a=0,b=this.__UIComponents__.length;a<b;a++)this.__UIComponents__[a].__Sleep__();this.__IsSleeping__=!0;this.Sleep()};this.__Awake__=function(a){for(var b=0,c=this.__UIComponents__.length;b<c;b++)this.__UIComponents__[b].__Awake__();
this.__IsSleeping__=!1;this.Awake(a)};this.__Destroy__=function(){this.__IsSleeping__||this.__Sleep__();for(var a=0,b=this.__UIComponents__.length;a<b;a++)this.__UIComponents__[a].__Destroy__();this.__UIComponents__=null;this.Destroy()};this.__Template__=function(a,b,c){this.__FileTmpl__=a;if("undefined"==typeof a)return this.__$Tmpl__=this.__$Container__;iris.Include(a);if(b){for(var d=k[a],g=d,e,h,f,i=/##([0-9A-Za-z_\.]+)(?:\|(date|currency)(?:\(([^\)]+)\))*)?##/g;e=i.exec(d);){f=W(b,e[1]);if(void 0!==
f){if(h=e[2])switch(h){case "date":f=ba(f,e[3]);break;case "currency":f=Z(f);break;default:iris.W("Unknow template format label '"+h+"' in '"+a+"'")}}else iris.W("Template param '"+e[1]+"' in '"+a+"' not found",b);g=g.replace(e[0],f)}b=g}else b=k[a];this.__$Tmpl__=b=$(b);1<b.size()&&iris.E("Template '"+a+"' must have only one root node");switch(c){case this.TEMPLATE_APPEND:this.__$Container__.append(b);break;case this.TEMPLATE_REPLACE:this.__$Container__.replaceWith(b);break;case this.TEMPLATE_PREPEND:this.__$Container__.prepend(b);
break;default:iris.E("Unknown template mode '"+c+"'")}};this.__CheckTmpl__=function(){null==this.__$Tmpl__&&iris.E("You must set a template using self.Template() in '"+this.__FileJs__+"'")};this.Show=function(){this.__CheckTmpl__();this.__$Tmpl__.show()};this.Hide=function(){this.__CheckTmpl__();this.__$Tmpl__.hide()};this.$Get=function(a){this.__CheckTmpl__();if(a){var b="[data-id="+a+"]",c=this.__$Tmpl__.filter(b),d=null;0<c.length?d=c:(b=this.__$Tmpl__.find(b),0<b.size()&&(d=b));if(null==d){iris.E("[data-id="+
a+"] not found in '"+this.__FileTmpl__+"' used by '"+this.__FileJs__+"'");return}if(1<d.size()){iris.E("[data-id="+a+"] must be unique in '"+this.__FileTmpl__+"' used by '"+this.__FileJs__+"'");return}return d}return this.__$Tmpl__};this.InstanceUI=function(a,b,c,d){a=this.$Get(a);if(1==a.size()){var g=a.data("id");x(b);var e=new da;e.__Id__=g;e.__$Container__=a;e.__UIComponents__=[];e.__Setting__={};e.__FileJs__=b;void 0!==d&&(e.__TemplateMode__=d);e.prototype=new k[b](e);c=void 0===c?{}:c;b=Y(a);
$.extend(e.__Setting__,b,c);e.Create(b,c);return this.__UIComponents__[this.__UIComponents__.length]=e}};this.DestroyUI=function(a){for(var b=0,c=this.__UIComponents__.length;b<c;b++)if(this.__UIComponents__[b]==a){this.__UIComponents__.splice(b,1);a.__Destroy__();a.$Get().remove();break}};this.DestroyAllUIs=function(a){for(var a="string"===typeof a?"[data-id="+a+"]":a.selector,b,c=0,d=this.__UIComponents__.length;c<d;c++)b=this.__UIComponents__[c],b.__$Container__.selector==a&&(this.__UIComponents__.splice(c--,
1),d--,b.__Destroy__(),b.$Get().remove())};this.$Container=function(){return this.__$Container__};this.Create=function(){};this.Awake=function(){};this.CanSleep=function(){return!0};this.Sleep=function(){};this.Destroy=function(){}}function ea(){this.__Components__=null;this.AddAll=function(a){for(var b=0,c=a.length;b<c;b++)this.Add(a[b])};this.Add=function(a){this.hasOwnProperty("UIAddOn")&&(a.proptotype=new this.UIAddOn(a));this.__Components__[this.__Components__.length]=a};this.Remove=function(a){for(var b,
c=0,d=this.__Components__.length;c<d;c++)b=this.__Components__[c],b===a&&this.__Components__.splice(c,1)};this.Get=function(a){return this.__Components__[a]};this.Size=function(){return this.__Components__.length};this.Create=function(){}}function da(){this.__TemplateMode__=this.TEMPLATE_REPLACE;this.TemplateMode=function(a){this.__TemplateMode__=a};this.Template=function(a,b){this.__Template__(a,b,this.__TemplateMode__)}}function D(){this.Template=function(a,b){this.__Template__(a,b,this.TEMPLATE_APPEND)};
this.AddScreen=function(a,b,c){var d=this.$Get(a);void 0===d.data("screen_context")&&d.data("screen_context",this.__Id__+"|"+a);O[b]=c;I[b]=d}}var i=null,C={error:!0},t="",j={},O={},I={},y={},u="",z={},A={},e=null,f={},p={},m={},k={},fa={},J="",E,R=$("head").get(0),K=!0,q,G=!1,N=!1,B={"en-US":{dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),monthNames:"January February March April May June July August September October November December".split(" "),dateFormat:"m/d/Y h:i:s",
currency:{formatPos:"n",formatNeg:"(n)",decimal:".",thousand:",",precision:2}},"es-ES":{dayNames:"Domingo Lunes Martes Mi\u00e9rcoles Jueves Viernes S\u00e1bado".split(" "),monthNames:"Enero Febrero Marzo Abril Mayo Junio Julio Agosto Septiembre Octubre Noviembre Diciembre".split(" "),dateFormat:"d/m/Y H:i:s",currency:{formatPos:"n",formatNeg:"-n",decimal:",",thousand:".",precision:2}}};L.prototype=new ca;ea.prototype=new ca;da.prototype=new L;D.prototype=new L;this.screen={};this.event={};this.config=
{};this.ui={};this.net={};this.global={};this.local={};this.lang={};this.util={};this.config.Load=function(a){if(a){$.extend(f,a);T(f.global);a=F();if(f.log){var b=f.log[a].split(","),c;for(c in b)C[$.trim(b[c])]=!0}K=!0;if(f.hasOwnProperty("environments-nocache")){c=f["environments-nocache"].split(",");for(var b=0,d=c.length;b<d;b++)if(c[b]==a){K=!1;break}}U(f.local)}return f};this.config.Env=F;this.global.Load=T;this.global.Data=function(a,b){if(a&&void 0!==b)z[a]=b;else return a?z[a]:z};this.local.Load=
U;this.local.Data=function(a,b){if(a&&void 0!==b)A[a][F()]=b;else return a?A[a][F()]:A};this.lang.Load=X;this.lang.LoadFrom=function(a,b,c){s("[iris.lang.LoadFrom]",a,b);Q(b,"json",function(b){X(a,b);s("[iris.lang.LoadFrom] loaded",b);c&&c.hasOwnProperty("success")&&c.success(a)},function(d){n(d.status,"Error loading lang file",b);c&&c.hasOwnProperty("error")&&c.error(a)})};this.lang.Get=S;this.lang.Locale=function(a){if(void 0!==a)e=a;else return e};this.L=function(){q&&window.console.log&&window.console.log(t,
arguments)};this.D=s;this.W=function(){q&&C.warning&&window.console.warn(t,arguments)};this.E=n;this.event.Subscribe=function(a,b){m[a]||(m[a]=[]);var c=V(a,b);-1==c&&(c=m[a].length);m[a][c]=b};this.event.Notify=function(a,b){if(m[a])for(var c=m[a],d=0,e=c.length;d<e;d++)c[d](b)};this.event.Remove=function(a,b){var c=V(a,b);-1!=c&&m[a].splice(c,1)};this.net.BaseUri=P;this.net.Ajax=function(a){return $.ajax(a)};this.Screen=function(a){a.prototype=new D;k[E]=a};this.UI=function(a){k[E]=a};this.screen.WelcomeScreen=
function(a){x(a);var b=new D;b.prototype=new k[a](b);b.__Id__="welcome-screen";b.__UIComponents__=[];b.__$Container__=$(document.body);b.__FileJs__=a;b.Create();b.__Awake__();b.Show();N=!0;document.location.hash&&M()};this.screen.Destroy=function(a){if(j.hasOwnProperty(a)){var b=j[a].$Get().parent().data("screen_context");y[b]==j[a]&&delete y[b];j[a].__Destroy__();j[a].$Get().remove();delete j[a]}else iris.W('Error removing the screen "'+a+'", path not found.')};this.ui.JqToHash=Y;this.ui.HashToJq=
function(a,b,c){var d=b.get(0);if(c)for(var e,f=0,h=c.length;f<h;f++)(e=a[c[f]])&&d.setAttribute(c[f],e);else for(e in a)d.setAttribute(e,a[e]);return b};this.Include=function(){for(var a=0,b=arguments.length;a<b;a++)x(arguments[a])};this.util.DateFormat=ba;this.util.Currency=Z;this.util.Deserialize=function(a,b){var c,d,e;for(name in b)if(c=a.find('[name="'+name+'"]'),0<c.length)switch(d=c[0].tagName.toLowerCase(),e=b[name],d){case "select":case "textarea":$(c).val(e);break;case "input":switch(d){case "checkbox":e&&
c.attr("checked","checked");break;case "radio":c.filter('[value="'+e+'"]').attr("checked","checked");break;default:c.val(e)}}};this.util.Serialize=function(a){var b={};$.map(a.serializeArray(),function(a){b[a.name]=a.value});return b};this.Goto=function(a){u=document.location.hash;document.location.hash=a};this.AddOn=function(a){fa[E]=a};this.ApplyAddOn=function(a,b,c){x(a);var d=new ea;d.__Components__=[];d.__Setting__={};d.prototype=new fa[a](d);d.Settings(c);d.AddAll(b);d.Create();return d};this.Regional=
function(a,b){!b.hasOwnProperty("dayNames")||!b.hasOwnProperty("monthNames")||!b.hasOwnProperty("dateFormat")||!b.hasOwnProperty("currency")||!b.currency.hasOwnProperty("formatPos")||!b.currency.hasOwnProperty("formatNeg")||!b.currency.hasOwnProperty("decimal")||!b.currency.hasOwnProperty("thousand")||!b.currency.hasOwnProperty("precision")?iris.E("Regional '"+a+"' has invalid format ",b):B[a]=b};"undefined"===typeof jQuery?n("jQuery 1.5+ previous load required"):1.5>$().jquery&&n("jQuery "+$().jquery+
" currently loaded, jQuery 1.5+ required");"onhashchange"in window?$(window).bind("hashchange",M):n("The browser doesn't support the hashchange event");q=window.console&&window.console.debug&&window.console.warn&&window.console.error;!q&&(window.console&&window.console.log)&&window.console.log("advanced console debugging is not supported in this browser")};