/*! iris - v0.6.0-SNAPSHOT - 2014-04-03 (http://thegameofcode.github.io/iris) licensed New-BSD */
!function(a){"use strict";function b(){d.call(g),g.events(g.BEFORE_NAVIGATION,g.AFTER_NAVIGATION,g.RESOURCE_ERROR,g.SCREEN_NOT_FOUND)}function c(a){a.destroyed=!0,delete a.eventMap,delete a.silent,delete a.listens,delete a.pubs}var d=function(){this.eventMap={},this.silent=!1,this.listens=[],this.pubs=[],this.events("destroy");var a=this;this.on("destroy",function(){c(a)})},e=d.prototype;e.events=function(){for(var a=0,b=arguments.length;b>a;a++)this.eventMap.hasOwnProperty(arguments[a])||(this.eventMap[arguments[a]]=[])},e.checkEvent=function(a){if(!this.eventMap.hasOwnProperty(a))throw"event["+a+"] is not registered, use self.events"},e.on=function(b,c){if(this.checkEvent(b),!a.isFunction(c))throw"invalid function";this.eventMap.hasOwnProperty(b)||(this.eventMap[b]=[]);var d=this.eventMap[b],e=a.inArray(c,d);-1===e&&d.push(c)},e.once=function(a,b){var c=this,d=function(){b.apply(c,arguments),c.off(a,d)};c.on(a,d)},e.off=function(b,c){if(this.checkEvent(b),void 0!==c&&!a.isFunction(c))throw"invalid function";var d=this.eventMap[b];if(d)if(void 0!==c){var e=a.inArray(c,d);-1!==e&&d.splice(e,1)}else this.eventMap[b]=[]},e.notify=function(a,b){if(this.checkEvent(a),this.silent)return!1;var c=this.eventMap[a];if(c)for(var d=c.length-1;d>=0;d--)c[d].call(this,b)},e.notifyOn=function(){this.silent=!1},e.notifyOff=function(){this.silent=!0},e.listen=function(b,c,d,e){void 0===e&&(e=!1),b.on(c,d),this.listens.push({pub:b,eventName:c,listener:d,pausable:!0,active:!0});var f=this;if(e&&-1===a.inArray(b,f.pubs)){f.pubs.push(b);var g=function(){f.pubs.splice(a.inArray(b,f.pubs),1);var c,d;for(c=f.listens.length-1;c>=0;c--)d=f.listens[c],d.pub===b&&f.listens.splice(c,1)};b.on("destroy",g),this.listens.push({pub:b,eventName:"destroy",listener:g,pausable:!1,active:!0})}},e.removeListeners=function(){var a,b,c;for(a=0,b=this.listens.length;b>a;a++)c=this.listens[a],c.pub.destroyed||c.pub.off(c.eventName,c.listener);this.listens=[],this.pubs=[]},e.pauseListeners=function(){var a,b;for(a=this.listens.length-1;a>=0;a--)b=this.listens[a],b.pub.destroyed?this.listens.splice(a,1):b.pausable&&b.active&&(b.pub.off(b.eventName,b.listener),b.active=!1)},e.resumeListeners=function(){var a,b;for(a=this.listens.length-1;a>=0;a--)b=this.listens[a],b.pub.destroyed?this.listens.splice(a,1):b.pausable&&!b.active&&(b.pub.on(b.eventName,b.listener),b.active=!0)};var f=function(){};f.prototype=new d;var g=new f;window.iris=g,g.Event=d,g.BEFORE_NAVIGATION="iris_before_navigation",g.AFTER_NAVIGATION="iris_after_navigation",g.RESOURCE_ERROR="iris_resource_error",g.SCREEN_NOT_FOUND="iris_screen_not_found",window.testMode&&window.addIrisReset(b),b()}(jQuery),function(a){"use strict";function b(){if("undefined"==typeof jQuery)throw"jQuery "+j+"+ previous load required";if(a().jquery<j)throw"jQuery "+a().jquery+" currently loaded, jQuery "+j+"+ required";var b=window.console;if("undefined"!=typeof b&&"object"==typeof b.log){var d=Function.prototype.bind;g=d?d.call(b.log,b):function(){Function.prototype.call.call(b.log,b,Array.prototype.slice.call(arguments))}}else b&&b.log&&(g=b.log);i=c("localhost","127.0.0.1"),h=i,e=!i}function c(){for(var a=0,b=arguments.length;b>a;a++)if(document.location.href.indexOf(arguments[a])>-1)return!0;return!1}var d,e,f,g,h,i,j=1.5;iris.baseUri=function(a){if(void 0!==a)d=a;else if(void 0===d){var b=document.getElementsByTagName("base");b=b.length>0?b[0].attributes.href.value:"/",d=document.location.protocol+"//"+document.location.host+b}return d},iris.cache=function(a){return void 0===a?e:void(e=a)},iris.cacheVersion=function(a){return void 0===a?f:void(f=a)},iris.log=function(){h&&g&&g.apply(window.console,arguments)},iris.enableLog=function(){if("boolean"==typeof arguments[0])h=arguments[0];else{if(!(arguments.length>0))return h;h=c.apply(this,arguments)}},iris.noCache=function(){return arguments.length>0?void(e=!c.apply(this,arguments)):!e},iris.isLocalhost=function(){return i},window.testMode&&window.addIrisReset(b),b()}(jQuery),function(a){"use strict";function b(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{name:b[1]||"",version:b[2]||"0"}}function c(a){return 10>a?"0"+a:a}function d(a,b){var d=iris.regional();switch(a){case"y":return String(b.getFullYear()).substring(2);case"Y":return b.getFullYear();case"m":var e=b.getMonth()+1;return c(e);case"n":return b.getMonth()+1;case"M":return d.monthNames[b.getMonth()].substring(0,3);case"b":return d.monthNames[b.getMonth()].substring(0,3).toLowerCase();case"F":return d.monthNames[b.getMonth()];case"d":var f=b.getDate();return c(f);case"D":return d.dayNames[b.getDay()].substring(0,3);case"l":return d.dayNames[b.getDay()];case"s":var g=b.getSeconds();return c(g);case"i":var h=b.getMinutes();return c(h);case"H":var i=b.getHours();return c(i);case"h":var j=b.getHours();return j=j%12===0?12:j%12,c(j);case"a":return b.getHours()>12?"p.m.":"a.m.";case"A":return b.getHours()>12?"PM":"AM";case"U":return Math.floor(.001*b.getTime());default:return a}}var e;iris.date=function(a,b){if(null===a)return"";b||(b=iris.regional("dateFormat")),"object"!=typeof a&&(a=new Date(a));for(var c="",e=0,f=b.length;f>e;e++)c+=d(b[e],a);return c},iris.ajax=function(b){return a.ajax(b)},iris.currency=function(b,c){var d={formatPos:"sn",formatNeg:"(sn)",symbol:"$"};a.extend(d,iris.regional("currency"),c);var e=iris.number(b,d);return e.replace("s",d.symbol)},iris.number=function(b,c){var d={formatPos:"n",formatNeg:"- n",decimal:".",thousand:",",precision:2};a.extend(d,iris.regional("number"),c);for(var e=Number(b),f=e>=0?d.formatPos:d.formatNeg,g=e%1,h=String(Math.abs(e-g)),i=0;i<Math.floor((h.length-(1+i))/3);i++)h=h.substring(0,h.length-(4*i+3))+d.thousand+h.substring(h.length-(4*i+3));return d.precision>0&&(g=String(Math.abs(g).toFixed(d.precision)),g=g.substr(2),h=h+d.decimal+g),f.replace("n",h)},iris.val=function(a,b){var c;if(b.indexOf(".")>-1){var d,e=b.split("."),f=e.length;for(d=0;f>d&&void 0!==a;d++)a=a[e[d]];c=a}else c=a[b];return c},iris.browser=function(){if(!e){var a=b(navigator.userAgent);e={},a.name&&(e[a.name]=!0,e.version=a.version),e.chrome?e.webkit=!0:e.webkit&&(e.safari=!0)}return e},iris.inherits=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c}}(jQuery),function(a){"use strict";function b(){e={}}function c(b,c){iris.log("[translations]",b,c),void 0===iris.locale()&&iris.locale(b),e.hasOwnProperty(b)||(e[b]={}),a.extend(e[b],c)}function d(a,b,d){iris.log("[translations]",a,b);var e={url:b,dataType:"json",async:!1,cache:iris.cache()};iris.cache()&&iris.cacheVersion()&&(e.data="_="+iris.cacheVersion()),iris.ajax(e).done(function(b){c(a,b),iris.log("[translations]",b),d&&d.hasOwnProperty("success")&&d.success(a)}).fail(function(c){throw d&&d.hasOwnProperty("error")&&d.error(a),"Error "+c.status+" loading lang file["+b+"]"})}var e;iris.translations=function(a,b,e){"object"==typeof b?c(a,b):d(a,b,e)},iris.translate=function(a,b){var c,d=null;d=void 0!==b?b:iris.locale();var f="[translate]";return e.hasOwnProperty(d)?(c=iris.val(e[d],a),void 0===c&&iris.log(f+" label '"+a+"' not found in Locale '"+d+"'",e[d]),"object"==typeof c&&iris.log(f+"label '"+a+"' is an object but must be a property in Locale '"+d+"'",e[d])):iris.log(f+" locale '"+d+"' not loaded",this),void 0!==c?c:"??"+a+"??"},window.testMode&&window.addIrisReset(b),b()}(jQuery),function(){"use strict";function a(){b=void 0,c={}}var b,c;iris.locale=function(a,d){if("object"==typeof d)c[a]||(c[a]={}),$.extend(c[a],d),void 0===b&&(b=a);else{if(void 0===a)return b;b=a}},iris.regional=function(a){if(c.hasOwnProperty(b))return"undefined"==typeof a?c[b]:c[b].hasOwnProperty(a)?c[b][a]:void 0;throw"[regional] for locale '"+b+"' not found"},window.testMode&&window.addIrisReset(a),a()}(),function(){"use strict";var a=function(){iris.Event.call(this),this.events("change")};iris.inherits(a,iris.Event);var b=a.prototype;b.set=function(a,b){var c,d=!1;if(void 0===b)for(var e in a)a.hasOwnProperty(e)&&(c=this.data[e],this.data[e]=a[e],d||(d=c!==a[e]));else c=this.data[a],d=c!==b,d&&(this.data[a]=b);return d&&this.notify("change"),this},b.get=function(a){return void 0===a?this.data:this.data[a]},b.unset=function(a){return this.data.hasOwnProperty(a)&&(delete this.data[a],this.notify("change")),this},b.destroy=function(){delete this.data,this.notify("destroy")},b.create=function(){},iris.Model=a}(jQuery),function(a){"use strict";var b=function(){this.cfg={}},c=b.prototype;c.settings=function(b){return a.extend(this.cfg,b)},c.setting=function(a,b){return void 0===b?(this.cfg.hasOwnProperty(a)||iris.log("setting '"+a+"' missing",this.cfg,this),this.cfg[a]):void(this.cfg[a]=b)},iris.Settable=b}(jQuery),function(a){"use strict";function b(){a(window).off("hashchange"),window.testMode&&(document.location.hash="#"),E={},R={},Q={},F={},G=!1,N={},O=[],P=[],L=!1,M="",J=0,K=[],H=[],S=!1,iris.isLocalhost()&&A(!0)}function c(b){if(G)throw"welcome screen already exists";G=!0,R["#"]={js:b,container:a(document.body),navMap:{}},N["#"]={},iris.hasOwnProperty("path")&&d(iris.path),H.length>0?g(H,f):f()}function d(a){if("string"==typeof a)F.hasOwnProperty(a)||H.push(a);else for(var b in a)d(a[b])}function e(b,c,d){if("string"!==a.type(c)||""===c)throw iris.log("[error] path["+c+"]",b),"Invalid path on "+d+" registration";F[c]=b}function f(){if(!("onhashchange"in window))throw"hashchange event unsupported";o(),a(window).on("hashchange",o)}function g(a,b){iris.log("[load-js]",a),I=b;for(var c,d,e=0,f=a.length;f>e;e++)F.hasOwnProperty(a[e])||(J++,c=/^https?:\/\//.test(a[e])?a[e]:String(iris.baseUri()+a[e]),iris.cache()?iris.cacheVersion()&&(c+="?_="+iris.cacheVersion()):c+="?_="+(new Date).getTime(),/\.html$/.test(a[e])?iris.ajax({url:c,dataType:"html",async:!0,context:a[e]}).done(i):(d=document.createElement("script"),d.type="text/javascript",d.src=c,d.charset="UTF-8",iris.browser().msie&&parseInt(iris.browser().version,10)<9?d.onreadystatechange=h:d.onload=j,X.appendChild(d)))}function h(){"loaded"===this.readyState&&j()}function i(a){F[this]=a.replace(W,""),j()}function j(){0===--J&&I()}function k(a){document.location.hash=a}function l(a){return new RegExp("^"+a.replace(U,"([^/]+)")+"(?:"+V+")*/*")}function m(a,b,c){var d,e,f={},g=b.match(c);if(g&&(g=g.slice(1),g.length>0)){var h=a.match(U);for(d=0,e=g.length;e>d;d++)f[h[d].substr(1)]=g[d]}var i=new RegExp("^"+a+"("+V+")+"),j=b.match(i);if(j&&j.length>0){var k,l=j[0].match(new RegExp(V,"g"));for(d=0,e=l.length;e>d;d++)k=l[d].indexOf("="),f[l[d].substr(1,k-1)]=l[d].substr(k+1)}return f}function n(a){return a.replace(U,"(?:[^/]+)")+"(?:"+V+")*(?:/?)"}function o(){var a,b,c,d,e,f,g,h,i,j=document.location.hash||"#",k=j,o=N,p=0,q="",r="",s=[],t=[];if(L)return L=!1,iris.notify(iris.AFTER_NAVIGATION),!1;for(iris.notify(iris.BEFORE_NAVIGATION);j;){c=!1,i=[];for(h in o)i.push(h);for(i.sort(),i.reverse(),d=0,e=i.length;e>d;d++)if(h=i[d],a=l(h),a.test(j)){c=!0,q?q+="/"+h:q=h,b?b+="/"+n(h):b="^"+n(h),r=k.match(b)[0].replace(/\/?$/,"");break}if(!c)return iris.notify(iris.SCREEN_NOT_FOUND,k),void iris.log("[warning] '"+k+"' must be registered using self.screens()");var u=O[p]&&O[p]===q;if(t.push(q),s.push(r),g=j,j=j.replace(a,""),o=o[h],!j&&O.length>p){for(f=u?p+1:p,d=O.length-1;d>=f;d--)if("#"!==O[d]&&E[O[d]].canSleep()===!1)return L=!0,document.location.href=M,!1;for(;O.length>f;){var v=O.pop();if(P.pop(),"#"!==v){var w=E[v];w._sleep(),w.hide()}}}var x,y=P[p]&&P[p]!==r,z=m(h,g,a);if(u)x=E[q],y&&(x.params=z,x._awake(z));else{if(E.hasOwnProperty(q))x=E[q];else{if(!R.hasOwnProperty(q))throw'"'+q+'" not found';x=new ab(q),x.params=z,x.create(),E[q]=x}x.show(),x._awake(z)}p++}M=k,O=t,P=s,iris.log("Navigation finished"),iris.notify(iris.AFTER_NAVIGATION)}function p(a){var b=a,c=b.match(/@@[0-9A-Za-z_\.]+@@/g);if(c){var d,e=c.length;for(d=0;e>d;d++)b=b.replace(c[d],iris.translate(c[d].substring(2,c[d].length-2)))}return b}function q(a,b){F[a]=b.replace(W,"")}function r(a,b){e(a,b,"ui")}function s(a){for(var b,c={},d=a.get(0).attributes,e=0,f=d.length;f>e;e++)b=d[e].name,0===b.indexOf("data-")&&(b=b.substr(5)),c[b]=d[e].value;return c}function t(a,b){e(a,b,"screen")}function u(a){if(E.hasOwnProperty(a)){if("#"===a)throw"Welcome screen cannot be deleted";var b=document.location.hash||"#";if("#"!==b&&(0===a.indexOf(b)||0===b.indexOf(a)))throw"Cannot delete the current screen or its parents";v(a)}else iris.log('[warning] "'+a+'" was not instantiated, nothing to destroy')}function v(a){var b=E[a];if(void 0!==b){if(void 0!==b.screenChilds)for(var c=0,d=b.screenChilds.length;d>c;c++)v(b.screenChilds[c]);b._destroy(),b.get().remove(),delete E[a];var e=R[a];delete e.parentNavMap[e.hashFragment],delete Q[e.js],delete R[a]}}function w(a,b){if("string"==typeof a){if(!F.hasOwnProperty(a))throw"add service["+a+"] to iris.path before";if(F[a].res){var c=new iris.Resource;c.cfg={},c.settings({type:"json",path:""}),F[a].res(c),c.create(),F[a]=c}return F[a]}e({res:a},b,"resource")}function x(a,b){return"function"!=typeof a?z(a,b):void y(a,b)}function y(a,b){e(a,b,"model")}function z(b,c){if(!F.hasOwnProperty(b))throw"add model["+b+"] to iris.path before";var d=new iris.Model;return d.path=b,F[b](d),d.data=a.extend({},d.defaults,c),d.create(),d}function A(b){var c=a(window.document),d=document.getElementById("iris-debug-css");b&&!d?(a('<style type="text/css" id="iris-debug-css">.iris-debug-ui { outline: 3px dotted blue; }.iris-debug-ui:hover { outline: 3px solid blue; box-shadow: 0px 0px 40px rgba(0, 0, 255, 0.5); }.iris-debug-screen { outline: 3px dotted red; }.iris-debug-screen:hover { outline: 3px solid red; box-shadow: 0px 0px 40px rgba(255, 0, 0, 0.5); }</style>').appendTo(X),c.on("keydown",B)):!b&&d&&(c.off("keydown",B),a(d).remove())}function B(a){if(a.shiftKey&&a.ctrlKey&&a.altKey&&16!==a.keyCode&&68===a.keyCode){S=!S;var b,c;for(b in E)c=E[b],D(c),C(c.uis)}}function C(a){for(var b=0,c=a.length;c>b;b++)D(a[b]),C(a[b].uis)}function D(b){if(b.template.toggleClass("iris-debug-"+b.type,S),S){var c="screen"===b.type?"red":"blue",d="screen"===b.type?"Hash":"Data-id",e={"font-family":"sans-serif","font-size":"14px",color:"white",padding:"4px","white-space":"nowrap","background-color":c},f="Type: "+b.type+"\n"+d+": "+b.id+"\nPresenter: "+b.fileJs+"\nTemplate: "+b.fileTmpl;b.debugElement=a('<span title="'+f+'"><b style="color:white;">'+b.id+"</b>  ["+b.fileJs+"]</span>").css(e).prependTo(b.template)}else b.debugElement&&b.debugElement.remove()}var E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T=/(date|currency|number)(?:\(([^\)]+)\))/,U=/:[\d\w_\-\.]+/g,V="[;?&][^=]+=[^;/&]+",W=/<!--[\s\S]*?-->/g,X=document.getElementsByTagName("head")[0],Y=function(a,b,c,d){iris.Settable.call(this),iris.Event.call(this),this.type=d,this.id=a,this.uis=[],this.uisMap={},this.el={},this.con=b,this.fileJs=c,this.fileTmpl=null,this.template=null,this.sleeping=null,F[c](this)};Y.prototype=a.extend({},iris.Settable.prototype,iris.Event.prototype);var Z=Y.prototype;Z.APPEND="append",Z.REPLACE="replace",Z.PREPEND="prepend",Z._sleep=function(){for(var a=0,b=this.uis.length;b>a;a++)this.uis[a]._sleep();this.sleeping=!0,this.sleep()},Z._awake=function(a){this.sleeping=!1,this.awake(a);for(var b=0,c=this.uis.length;c>b;b++)this.uis[b].sleeping!==!1&&this.uis[b]._awake()},Z._destroy=function(){this.sleeping||this._sleep();for(var a=0,b=this.uis.length;b>a;a++)this.uis[a]._destroy();this.destroy(),this.uis=null,this.notify("destroy")},Z._tmpl=function(b,c){var d,e,f;if(null!==this.template)throw"self.tmpl() has already been called in '"+this.fileJs+"'";if(this.fileTmpl=b,f=a(p(F[b])),this.template=f,f.size()>1)throw"'"+b+"' must have only one root node";switch(c){case this.APPEND:this.con.append(f);break;case this.REPLACE:this.con.replaceWith(f),this.con={selector:this.con.selector};break;case this.PREPEND:this.con.prepend(f);break;default:throw"Unknown template mode '"+c+"'"}for(this.el={},this.inflateTargets={},this._data_attrs(f),e=f.get(0).getElementsByTagName("*"),d=e.length;d--;)this._data_attrs(a(e[d]))},Z._data_attrs=function(a){var b,c,d,e,f,g,h,i,j,k=a.get(0).attributes,l={},m={};for(b=k.length;b--;)if(d=k[b],0===d.name.indexOf("data-"))if(c=d.name.substr(5),"id"!==c)if(-1===c.indexOf("-format",c.length-7)){if(0===c.indexOf("jq-"))if(c=c.substr(3),/^(text|html|val|toggle)$/.test(c))f=c;else{if(!/^(prop-|attr-)/.test(c))continue;f=c.substr(0,4),g=c.substr(5)}this.inflateTargets.hasOwnProperty(d.value)||(this.inflateTargets[d.value]=[]),e={target:f,targetParams:g,el:a},this.inflateTargets[d.value].push(e),m[c]=e}else h=d.value,i=void 0,h&&T.test(h)&&(j=h.match(T),h=j[1],i=j[2]),l[c.substr(3,c.length-10)]={key:h,params:i};else this.el[d.value]=a;for(c in l)m.hasOwnProperty(c)&&(m[c].format=l[c].key,m[c].formatParams=l[c].params)},Z.inflate=function(a){var b,c,d,e,f,g,h;for(b in this.inflateTargets)if(g=iris.val(a,b),void 0!==g)for(e=this.inflateTargets[b],c=0,d=e.length;d>c;c++){switch(f=e[c],f.format){case"date":h=iris.date(g,f.formatParams);break;case"currency":h=iris.currency(g);break;case"number":h=iris.number(g);break;default:h=g}switch(f.target){case"text":f.el.text(h);break;case"html":f.el.html(h);break;case"val":f.el.val(h);break;case"toggle":f.el.toggle(h);break;case"prop":f.el.prop(f.targetParams,h);break;case"attr":f.el.attr(f.targetParams,h)}}},Z._checkTmpl=function(){if(null===this.template)throw"Set a template using self.tmpl() in '"+this.fileJs+"'"},Z.show=function(){this._checkTmpl(),this.template.show()},Z.hide=function(){this._checkTmpl(),this.template.hide()},Z.get=function(a){if(this._checkTmpl(),a){if(!this.el.hasOwnProperty(a)){var b="[data-id="+a+"]",c=this.template.filter(b),d=null;if(c.length>0)d=c;else{var e=this.template.find(b);e.size()>0&&(d=e)}if(null===d)throw"[data-id="+a+"] not found in '"+this.fileTmpl+"' used by '"+this.fileJs+"'";if(d.size()>1)throw"[data-id="+a+"] must be unique in '"+this.fileTmpl+"' used by '"+this.fileJs+"'";this.el[a]=d}return this.el[a]}return this.template},Z._ui=function(a,b,c,d){if(void 0===b){var e=this.uisMap[a];return void 0===e&&(e=[]),e}return this._createUi(a,b,c,d)},Z._createUi=function(a,b,c,d){var e=this.get(a);if(void 0!==e&&1===e.size()){var f=new $(e,e.data("id"),b,c,d,this);return(void 0===f._tmplMode||f._tmplMode===f.REPLACE)&&(this.el[a]=void 0),this.uis.push(f),f._tmplMode===f.REPLACE?this.uisMap[a]=f:(this.uisMap.hasOwnProperty(a)||(this.uisMap[a]=[]),this.uisMap[a].push(f)),f}throw"The container does not exist or has been replaced."},Z.destroyUI=function(b){if(void 0===b)this.parentUI.destroyUI(this);else{var c;if(c=a.inArray(b,this.uis),-1!==c&&this.uis.splice(c,1),b._tmplMode===b.REPLACE)this.uisMap[b.id]=null,delete this.uisMap[b.id];else{var d=this.uisMap[b.id];c=a.inArray(b,d),-1!==c&&d.splice(c,1)}b._destroy(),b.get().remove()}},Z.destroyUIs=function(b){var c=this.uisMap[b];if(a.isArray(c)){var d;for(d=c.length-1;d>=0;d--)this.destroyUI(c[d])}else c&&c._tmplMode===this.REPLACE&&this.destroyUI(c)},Z.container=function(){return this.con},Z.model=function(a){if("string"!=typeof a)throw"path must be string";var b=this.setting("model");if(!b||b.path!==a)throw"model["+a+"] not found";return b},Z.create=function(){},Z.awake=function(){},Z.sleep=function(){},Z.destroy=function(){};var $=function(b,c,d,e,f,g){Y.call(this,c,b,d,"ui");var h=s(b);this.parentUI=g,this._tmplMode=f||"replace",a.extend(this.cfg,h,e||{}),this.create(),this._awake()};iris.inherits($,Y);var _=$.prototype;_.tmplMode=function(a){this._tmplMode=a},_.tmpl=function(a){this._tmpl(a,this._tmplMode)},_.ui=function(a,b,c,d){return this._ui(a,b,c,d)};var ab=function(a){var b=R[a];Y.call(this,a,b.container,b.js,"screen"),this.params={},this.screenConId=null,this.navMap=null,this.hash=null};iris.inherits(ab,Y);var bb=ab.prototype;bb.param=function(a){return this.params[a]},bb.ui=function(a,b,c,d){if(a===this.screenConId)throw"'"+a+"' has already been registered as a screen container";return this._ui(a,b,c,d)},bb.tmpl=function(a){this._tmpl(a,this.APPEND)},bb.screens=function(a,b){if(this.screenConId=a,this.hasOwnProperty("screenChilds"))throw"Multiple calls to self.screens() are not allowed: "+this.id;if(null===this.template)throw"self.tmpl() must be called before self.screens(): "+this.id;var c=this.get(a);this.screenChilds=[];var d=R[this.id];this.navMap="#"===this.id?N["#"]:d.parentNavMap[d.hashFragment];for(var e,f,g,h,i=0,j=b.length;j>i;i++){if(e=b[i],f=e[0],g=this.id+"/"+f,h=e[1],Q.hasOwnProperty(h))throw'Cannot associate "'+h+'" to "'+g+'", it was previously used in "'+Q[h]+'"';if(R.hasOwnProperty(g))throw'The hash "'+g+'" was associated to "'+R[g].js+'" previously, cannot associate to "'+h+'" again';Q[h]=g,R[g]={js:h,parentNavMap:this.navMap,container:c,hashFragment:f},this.screenChilds[i]=g,this.navMap[f]={},iris.log("Register screen hash["+g+"] js["+h+"]")}},bb.canSleep=function(){return!0},iris.screen=t,iris.destroyScreen=u,iris.welcome=c,iris.navigate=k,iris.ui=r,iris.tmpl=q,iris.resource=w,iris.model=x,iris.include=g,iris.debug=A,iris.Component=Y,iris.UI=$,iris.Screen=ab,window.testMode&&window.addIrisReset(b),b()}(jQuery),function(){"use strict";var a=function(){iris.Settable.call(this),iris.Event.call(this)};a.prototype=$.extend({},iris.Settable.prototype,iris.Event.prototype),a.prototype.ajax=function(a,b,c){return iris.ajax({url:this.setting("path")+b,type:a,data:c,cache:!1,dataType:this.setting("type"),async:!0,error:function(a,b,c){iris.notify(iris.RESOURCE_ERROR,{request:a,status:b,error:c})}})},a.prototype.get=function(a,b){return this.ajax("GET",a,b)},a.prototype.del=function(a){return this.ajax("DELETE",a,null)},a.prototype.put=function(a,b){return this.ajax("PUT",a,b)},a.prototype.post=function(a,b){return this.ajax("POST",a,b)},a.prototype.create=function(){},iris.Resource=a}();